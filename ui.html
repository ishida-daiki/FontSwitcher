<style>
  /* Reset CSS */
  html,
  body,
  div,
  span,
  object,
  iframe,
  h1,
  h2,
  h3,
  h4,
  h5,
  h6,
  p,
  blockquote,
  pre,
  abbr,
  address,
  cite,
  code,
  del,
  dfn,
  em,
  img,
  ins,
  kbd,
  q,
  samp,
  small,
  strong,
  sub,
  sup,
  var,
  b,
  i,
  dl,
  dt,
  dd,
  ol,
  ul,
  li,
  fieldset,
  form,
  label,
  legend,
  table,
  caption,
  tbody,
  tfoot,
  thead,
  tr,
  th,
  td,
  article,
  aside,
  canvas,
  details,
  figcaption,
  figure,
  footer,
  header,
  hgroup,
  menu,
  nav,
  section,
  summary,
  time,
  mark,
  audio,
  video {
    margin: 0;
    padding: 0;
    border: 0;
    outline: 0;
    font-size: 100%;
    vertical-align: baseline;
    background: transparent;
    list-style: none;
  }
  body {
    margin: 0;
    background-color: var(--figma-color-bg);
    color: var(--figma-color-text);
    font-family: "Inter";
    font-size: 11px;
    font-weight: 400;
    width: 100%;
  }
  /* ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãŒé–‹ã„ã¦ã„ã‚‹é–“ã¯hoverã‚¹ã‚¿ã‚¤ãƒ«ã‚’ç„¡åŠ¹ã«ã™ã‚‹ */
  body.menu-open .apply-style__item:hover,
  body.menu-open .apply-style__options-button:hover {
    outline: none;
    background: none;
  }
  /* Webkitãƒ™ãƒ¼ã‚¹ã®ãƒ–ãƒ©ã‚¦ã‚¶ç”¨ */
  .scrollbar-hidden::-webkit-scrollbar {
    display: none; /* ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼ã‚’éè¡¨ç¤º */
  }

  /* Firefoxç”¨ */
  .scrollbar-hidden {
    scrollbar-width: none; /* Firefoxã§ã¯ã“ã‚Œã§ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼ã‚’éè¡¨ç¤ºã«ã§ãã‚‹ */
  }

  /* IEãŠã‚ˆã³Edgeãƒ¬ã‚¬ã‚·ãƒ¼ãƒ–ãƒ©ã‚¦ã‚¶ç”¨ */
  .scrollbar-hidden {
    -ms-overflow-style: none; /* å¤ã„IEã¨Edgeç”¨ */
  }
  svg {
    display: block;
  }
  .overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    z-index: 9;
  }
  .tab-list {
    position: relative;
    border-bottom: 1px var(--figma-color-border) solid;
    padding-left: 1rem;
    padding-right: 1rem;
    height: 40px;
  }
  .tab-list__items {
    display: flex;
    gap: 8px;
    color: var(--figma-color-text-onselected);
    height: 100%;
  }
  .tab-list__item {
    display: flex;
    align-items: center;
    margin-right: 0.5rem;
    cursor: default;
    height: 100%;
    color: var(--figma-color-text-disabled);
  }
  .tab-list__item:hover {
    color: var(--figma-color-text);
  }
  .tab-list__text {
    font-size: 11px;
    font-weight: 500;
  }
  /* é¸æŠã•ã‚ŒãŸã‚¿ãƒ–ã®ãƒ†ã‚­ã‚¹ãƒˆã‚¹ã‚¿ã‚¤ãƒ« */
  .tab-list__item--active .tab-list__text {
    /* å¤ªå­—ã«ã™ã‚‹ */
    font-weight: 600;
    color: var(--figma-color-text);
  }
  /* é¸æŠã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ã®ã‚¹ã‚¿ã‚¤ãƒ« */
  .tab-list-active-indicator {
    height: 2px;
    background: var(--figma-color-border-onselected-strong);
    width: 100%;
    border-radius: 6px;
    position: absolute;
    bottom: -1px;
    left: 0;
  }
  /* éã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªã‚¿ãƒ–ã‚’éš ã™ */
  .tab-list-active-indicator--inactive {
    display: none;
  }
  .create-style__apply-button {
    padding: 0.8rem 1.5rem;
    margin: 8 16 16 16px;
    border-radius: 6px;
    font-weight: 600;
  }
  .create-style__apply-button.disabled {
    border: var(--figma-color-border-disabled);
    color: var(--figma-color-text-disabled);
    background: var(--figma-color-bg-disabled);
  }
  .create-style__apply-button.active {
    border: var(--figma-color-border-selected);
    color: var(--figma-color-text-onbrand);
    background: var(--figma-color-bg-brand);
  }
  .create-style__apply-button.active:hover {
    cursor: default;
    border: var(--figma-color-border-selected);
    background: var(--figma-color-bg-brand-hover);
  }
  .create-style__apply-button.active:active {
    color: var(--figma-color-text-onbrand);
    background: var(--figma-color-bg-brand-pressed);
  }
  .apply-style {
    display: flex;
    flex-direction: column;
  }
  .create-style {
    display: flex;
    flex-direction: column;
    border-right: 1px solid var(--figma-color-border);
  }
  .error {
    color: var(--figma-color-text-danger);
  }
  .apply-style__text {
    color: var(--figma-color-text-disabled);
    font-weight: 400;
  }
  .apply-style__content {
    display: flex;
    flex-direction: column;
    padding: 8 0px;
  }
  .create-style__content {
    display: flex;
    flex-direction: column;
    padding: 8 0px;
  }
  .apply-style__title {
    font-weight: 600;
    line-height: 16px;
    letter-spacing: 0.06px;
  }
  .create-style__tab-title {
    font-weight: 600;
    line-height: 16px;
    letter-spacing: 0.06px;
  }
  .apply-style__item-content {
    display: flex;
    justify-content: space-between;
    cursor: default;
    padding: 0 8px;
    border-radius: 2px;
    align-items: center;
    height: 30px;
    flex-grow: 2;
  }
  .apply-style__list {
    display: flex;
    flex-direction: column;
    position: relative;
    height: 200px;
    overflow-y: hidden;
  }
  .apply-style__item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    position: relative;
    box-sizing: border-box;
    outline: 1px solid transparent;
    outline-offset: -1px;
    min-height: 40px;
    padding: 0 8px;
  }
  .apply-style__item:hover {
    outline: 1px solid var(--figma-color-border-selected, #0c8ce9);
    opacity: 1;
  }
  .apply-style__item:focus-visible {
    background: var(--figma-color-bg-selected);
    color: var(--figma-color-text);
  }
  .apply-style__item.active {
    background: var(--figma-color-bg-selected, rgba(0, 0, 0, 0.06));
    outline: 1px solid transparent;
  }
  .apply-style__item.active .apply-style__options-button:hover {
    background: var(--figma-color-bg-selected-hover, rgba(0, 0, 0, 0.06));
  }
  .apply-style__item-title {
    color: var(--figma-color-text);
    font-weight: 400;
    letter-spacing: 0.055px;
  }
  .apply-style__options-button {
    right: 8;
    border: 1px solid transparent;
    outline: none;
    display: flex;
    align-items: center;
    justify-content: center;
    height: 32px;
    width: 32px;
    flex: 0 0 32px;
    cursor: default;
    border-radius: 2px;
    background-clip: padding-box;
    background-color: transparent;
    transition: 0.1s fill ease-out, 0.1s color ease-out;
  }
  .apply-style__options-button:hover {
    background: var(--figma-color-bg-hover, rgba(0, 0, 0, 0.06));
  }
  .apply-style__options-button.active {
    background: var(--figma-color-bg-brand, #0d99ff);
  }
  .apply-style__options-button.active .apply-style__options-svg {
    fill: var(--figma-color-icon-onbrand);
  }
  /* ãƒœã‚¿ãƒ³ãŒãƒ›ãƒãƒ¼ã•ã‚ŒãŸæ™‚ã«ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã‚’è¡¨ç¤ºã™ã‚‹ */
  .apply-style__options-button:hover + .apply-style__popup {
    display: block;
  }

  .apply-style__options-button.active ~ .menu {
    display: block; /* ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªçŠ¶æ…‹ã®ãƒœã‚¿ãƒ³ã®å…„å¼Ÿè¦ç´ ã§ã‚ã‚‹menuã‚’è¡¨ç¤º */
  }

  .scroll_container--track--HEzfy {
    position: absolute;
    right: 0;
    top: 0;
    bottom: 0;
    width: 6px;
    padding: 2px;
    cursor: default;
    z-index: 7;
  }
  .scroll_container--scrollBar--YLWIi {
    display: none;
    position: absolute;
    width: 6px;
    right: 2px;
    top: 0;
  }
  .scroll_container--scrollBar--YLWIi:after {
    content: "";
    position: absolute;
    inset: 2px 0;
    width: 100%;
    border-radius: 6px;
    background: rgba(179, 179, 179, 0.5);
  }

  .apply-style__message {
    display: grid;
    place-content: center;
    height: 96px;
    background-color: var(--figma-color-bg-secondary);
    padding: 0 16px;
    line-height: 1.5;
    border-bottom: 1px var(--figma-color-border) solid;
  }
  .center {
    text-align: center;
  }
  .text {
    padding-top: 1px;
    color: var(--figma-color-text-disabled);
    pointer-events: none;
  }
  .apply-style__options-svg {
    fill: var(--figma-color-icon);
  }
  /* ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ã®ã‚¹ã‚¿ã‚¤ãƒ« */
  .loading-indicator {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: var(--figma-color-bg-inverse);
    display: flex;
    flex-direction: column;
    align-content: center;
    align-items: center;
    opacity: 95%;
  }
  .progress-ring {
    width: 240px;
    height: 240px;
  }
  .progress-ring__circle {
    transition: stroke-dashoffset 0.35s;
    transform: rotate(-90deg);
    transform-origin: 50% 50%;
  }
  .progress-text {
    color: var(--figma-color-text-oninverse);
  }
  .select-content {
    display: flex;
  }

  /* Additional styles for 'select' dropdown */
  .select-container {
    position: relative;
    margin-bottom: 10px;
  }

  .select-dropdown {
    padding: 4px;
    border: 1px solid var(--figma-color-border);
    background-color: var(--figma-color-bg);
    border-radius: 4px;
    width: 100%;
    font-family: "Inter", sans-serif;
    font-size: 11px;
    cursor: default;
    appearance: none; /* Disables the native drop-down arrow */
  }

  .select-dropdown:focus {
    outline: none;
    border-color: var(--figma-color-border-focus);
  }

  /* Style for custom dropdown arrow */
  .select-arrow {
    position: absolute;
    right: 10px;
    top: 50%;
    transform: translateY(-50%);
    pointer-events: none; /* Makes sure the svg does not prevent clicking the select box */
  }

  .select-arrow svg {
    fill: var(--figma-color-icon); /* Icon color */
  }

  .create-style.font-family {
    display: flex;
    flex-direction: column;
    max-height: 295px;
    top: calc(100% + 1px);
    -webkit-font-smoothing: antialiased;
    pointer-events: none;
    background-color: #1e1e1e;
    border-radius: var(--border-radius-2);
    box-shadow: var(--box-shadow-menu);
    color: #fff;
    font-size: var(--font-size-12);
    left: 0;
    min-width: 100%;
    overflow-y: auto;
    padding: var(--space-extra-small) 0;
    position: absolute;
  }
  .font-family_label {
    position: relative;
    padding: 4px var(--space-medium) 4px 32px;
    text-overflow: ellipsis;
    white-space: nowrap;
    display: block;
  }

  .font-family_labelText {
    display: block;
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    height: 100%;
    width: 100%;
  }

  .create-style__font-menu {
    background: var(--figma-color-bg);
    box-shadow: 0px 5px 17px rgba(0, 0, 0, 0.2);
    border-radius: 2px;
    z-index: 100;
    overflow-y: auto;
  }
  .create-style__font-menu.font-family-list-container {
    position: absolute;
    right: 24px;
    left: 24px;
    top: 24px;
    bottom: 24px;
    padding-top: 8px;
    padding-bottom: 8px;
    display: flex;
    flex-direction: column;
  }
  .create-style__font-menu.font-family-list-container.hidden {
    display: none;
  }
  .create-style__font-menu.font-weight-list-container {
    position: absolute;
    right: 8px;
    width: 178px;
    padding-top: 8px;
    padding-bottom: 8px;
    max-height: 164px;
  }

  .scroll_container > .font-menu__item {
    width: 100%;
    min-height: 28px;
    position: relative;
    display: flex;
    align-items: center;
  }
  .scroll_container > .font-menu__item:hover {
    background: var(--figma-color-bg-hover);
  }
  .font-menu__item {
    width: 100%;
    min-height: 24px;
    position: relative;
    display: flex;
    align-items: center;
  }
  .font-menu__item:hover {
    background: #18a0fb;
  }
  .menu {
    width: 178px;
    padding-top: 8px;
    padding-bottom: 8px;
    background: #222222;
    box-shadow: 0px 5px 17px rgba(0, 0, 0, 0.2);
    border-radius: 2px;
    color: var(--figma-color-text-onbrand);
    position: absolute;
    right: 8px;
    max-height: 164px;
    overflow-y: auto;
    display: none;
    z-index: 10;
    top: 40px;
  }

  .menu__item {
    height: 24px;
    position: relative;
    display: flex;
    align-items: center;
    padding: 0 16px;
  }
  .menu__item:hover {
    background: #18a0fb;
  }
  .menu__item__divider {
    height: 17px;
    position: relative;
    display: flex;
    align-items: center;
  }
  .menu__divider {
    position: absolute;
    height: 1px;
    width: 100%;
    left: 0px;
    background: rgba(255, 255, 255, 0.2);
  }

  .font-menu__item__icon {
    position: absolute;
    left: 8px;
    width: 20px;
    height: 16px;
  }

  .font-menu__divider {
    width: 100%;
    height: 17px;
    position: relative;
    display: flex;
    align-items: center;
  }
  .font-menu__divider_item {
    width: 100%;
    border: 1px rgba(255, 255, 255, 0.2) solid;
  }

  .font-menu__text {
    display: flex;
    align-items: center;
    width: 100%;
    height: 100%;
    left: 32px;
    top: 0px;
    position: absolute;
    color: var(--color-text);
    font-size: 12px;
    font-family: Inter;
    font-weight: 400;
    line-height: 16px;
    letter-spacing: 0.06px;
    word-wrap: break-word;
  }

  .font-menu__icon {
    width: 16px;
    height: 16px;
    left: 8px;
    top: 4px;
    position: absolute;
  }

  .font-menu__icon-img {
    width: 9.91px;
    height: 7.62px;
    left: 3.29px;
    top: 3.79px;
    position: absolute;
  }
  /* éè¡¨ç¤ºã«ã™ã‚‹ãŸã‚ã®ã‚¯ãƒ©ã‚¹ */
  .hidden {
    display: none;
  }
  /* ãƒ«ãƒ¼ãƒˆè¦ç´  (Block) */
  .apply-style__styles {
    height: 32px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    position: relative;
    padding: 0 8 0 16px;
  }
  /* ãƒ«ãƒ¼ãƒˆè¦ç´  (Block) */
  .create-style__tab-header {
    height: 32px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    position: relative;
    padding: 0 8 0 16px;
  }
  /* ãƒ«ãƒ¼ãƒˆè¦ç´  (Block) */
  .create-style__styles {
    height: 32px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    position: relative;
    padding: 0 8 0 16px;
    color: var(--figma-color-text-secondary);
    font-weight: 500;
  }

  /* ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã‚³ãƒ³ãƒ†ãƒŠ (Element) */
  .apply-style__popup {
    position: absolute;
    bottom: -34px;
    right: 8px;
    display: none;
    z-index: 100;
    border-radius: 2px;
    z-index: 10;
  }
  .apply-style__popup.edit {
    right: 40px;
  }
  .apply-style__popup.delete {
    right: 8px;
  }

  /* ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã‚³ãƒ³ãƒ†ãƒŠ (Element Modifier) */
  .apply-style__popup:hover {
    display: block;
  }

  /* ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã‚¢ãƒ­ãƒ¼ã®ã‚³ãƒ³ãƒ†ãƒŠ (Element) */
  .apply-style__popup-arrow-container {
    position: relative;
  }

  /* ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã®å†…å®¹ (Element) */
  .apply-style__popup-content {
    height: 28px;
    background: #222222;
    color: #ffffff;
    box-shadow: 0px 2px 7px rgba(0, 0, 0, 0.15);
    padding: 0 8px;
    display: flex;
    align-items: center;
  }

  /* ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã‚¢ãƒ­ãƒ¼ (Element) */
  .apply-style__popup-arrow {
    position: absolute;
    top: -6px;
    right: 10;
  }
  /* Dropdown Component Styles */
  .create-style__dropdown {
    /* ã‚¹ã‚¿ã‚¤ãƒ«ã‚·ãƒ¼ãƒˆã®ãƒªã‚»ãƒƒãƒˆã‚„è¿½åŠ ã®ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°ãŒå¿…è¦ãªå ´åˆã¯ã“ã“ã«è¨˜è¿° */
    display: flex;
    margin: 0 16 0 8px;
    align-items: flex-start;
  }

  .create-style__dropdown-toggle {
    font-size: 11px;
    display: flex;
    align-items: center;
    padding-right: 4px;
    color: var(--figma-color-text, #333333);
    fill: var(--figma-color-icon, #333333);
    border-radius: 2px;
    cursor: default;
    box-sizing: border-box;
    background-clip: padding-box;
    height: 28px;
    border: 1px solid transparent;
    border-radius: 2px;
    position: relative;
    box-sizing: border-box;
    margin-top: 1px;
    padding: 0 4 0 8px;
    margin: 1 0px;
    background: transparent;
  }
  .create-style__dropdown-toggle.font-weight {
    flex-grow: 1;
    appearance: none; /* ãƒ–ãƒ©ã‚¦ã‚¶ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’è§£é™¤ */
  }

  .create-style__dropdown-toggle.font-family:hover,
  .create-style__dropdown-toggle.font-family:active {
    /* ãƒ›ãƒãƒ¼ã‚„ãƒ•ã‚©ãƒ¼ã‚«ã‚¹æ™‚ã®è¿½åŠ ã‚¹ã‚¿ã‚¤ãƒ«ã€‚ä¾‹ãˆã°èƒŒæ™¯è‰²ã‚’å¤‰æ›´ã™ã‚‹ãªã© */
    background: var(--figma-color-bg-hover);
  }
  .create-style__dropdown-toggle.font-family:focus-visible {
    border: 2px solid var(--figma-color-border-selected);
  }
  .create-style__dropdown-toggle.font-weight:hover,
  .create-style__dropdown-toggle.font-weight:active {
    border: 1px solid var(--figma-color-border, rgba(0, 0, 0, 0.1));
    justify-content: space-between;
  }

  .create-style__dropdown-label {
    max-width: calc(100% - 12px); /* ã‚¢ã‚¤ã‚³ãƒ³ã®å¹…ã‚’è€ƒæ…®ã—ãŸå¹…ã‚’è¨­å®š */
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .create-style__dropdown-icon-container {
    width: 16px;
    flex: 0 0 16px;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    color: var(--figma-color-icon-disabled);
    fill: var(--figma-color-icon-disabled);
  }

  .create-style__dropdown-icon {
    width: 16px; /* SVGã®å¤§ãã•ã‚’æŒ‡å®š */
    margin-left: auto; /* ã‚¢ã‚¤ã‚³ãƒ³ã‚’å³å¯„ã›ã™ã‚‹ */
  }
  .create-style__dropdown-group.font-family {
    display: flex;
    flex-direction: column;
    flex-grow: 3;
    width: 180px;
  }
  .create-style__dropdown-group.font-weight {
    display: flex;
    flex-direction: column;
    flex-grow: 1;
    width: 120px;
  }
  .create-style__input-group {
    box-sizing: border-box;
    padding: 16px;
    width: 100%;
    height: max-content;
    background-color: transparent;
    display: flex;
    flex-direction: row;
    -webkit-box-pack: justify;
    justify-content: space-between;
    align-items: center;
    border-bottom: 1px solid var(--figma-color-border);
  }
  .create-style__label {
    -webkit-user-select: none;
    user-select: none;
    text-align: left;
    color: var(--figma-color-text, #333333);
    fill: var(--figma-color-icon, #333333);
    border-radius: 2px;
    cursor: default;
    box-sizing: border-box;
    background-clip: padding-box;
  }
  .create-style__input {
    grid-column-start: 1;
    padding: 0 8px;
    margin: 1 0px;
    border: 1px solid var(--figma-color-border);
    width: calc(100% - 96px);
    background-color: var(--color-bg);
    grid-column-end: span 28;
    color: var(--figma-color-text);
    fill: var(--figma-color-icon);
    border-radius: 2px;
    cursor: default;
    box-sizing: border-box;
    background-clip: padding-box;
    height: 28px;
    font-size: 11px;
    border-radius: 2px;
  }
  .create-style__input:focus-visible {
    height: 30px;
    margin-top: 0;
    margin-bottom: 0;
    border: 1px solid var(--figma-color-border-selected, #0d99ff);
    outline: 1px solid var(--figma-color-border-selected, #0d99ff);
    outline-offset: -2px;
  }
  .create-style__submit-button {
    color: var(--figma-color-text-onbrand, #fff);
    background-color: var(--figma-color-bg-brand);
    border: none;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    height: 32px;
    line-height: 32px;
    max-width: 200px;
    padding: 0 12px;
    border-radius: 6px;
    -moz-outline-radius: 6px;
    cursor: default;
    -webkit-user-select: none;
    user-select: none;
  }
  .create-style__form-action {
    box-sizing: border-box;
    mix-blend-mode: normal;
    overflow: hidden;
    position: relative;
    padding: 16px;
    display: flex;
    flex-direction: row;
    -webkit-box-pack: justify;
    justify-content: space-between;
    -webkit-box-align: center;
    align-items: center;
    border-top: 1px solid var(--figma-color-border);
  }
  .create-style__tabs {
    padding: 8 0px;
    display: flex;
    flex-direction: column;
  }
  input::placeholder {
    color: var(
      --figma-color-text-tertiary,
      #0000004d
    ); /* å¥½ããªè–„ã„è‰²ã«å¤‰æ›´ã—ã¦ãã ã•ã„ */
    opacity: 1; /* ä¸é€æ˜åº¦ã‚’è¨­å®šã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ï¼ˆå¿…é ˆã§ã¯ã‚ã‚Šã¾ã›ã‚“ï¼‰ */
  }

  .font_picker--fontPickerSearchRow--PBwi7 {
    color: var(--figma-color-icon);
    padding-left: 16px;
    padding-right: 12px;
    min-height: 40px;
    display: flex;
    align-items: center;
    border-bottom: 1px solid var(--figma-color-border);
  }
  .font_picker--searchIcon--ADEyj {
    padding-right: 2px;
    fill: var(--figma-color-icon);
  }
  .font_picker--fontPickerSearchBar--XigbT {
    margin-left: 8px;
    margin-right: 5px;
    width: 100%;
  }
  .font_picker--fontPickerSearchBarInput--qOPld {
    font-weight: 400;
    width: 100%;
    background-color: var(--figma-color-bg);
    color: var(--figma-color-text);
    height: 15px;
    border: none;
    padding: 0px;
  }
  .font_picker--fontPickerSearchBarInput--qOPld:focus {
    outline: 0px;
  }
  .scroll_container {
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    overflow-y: auto;
  }
  .sample-style__message {
    display: grid;
    place-content: center;
    height: 110px;
    background-color: var(--figma-color-bg-secondary);
    padding: 0 16px;
    line-height: 1.5;
    border-bottom: 1px var(--figma-color-border) solid;
  }
  .sample-text-container {
    width: 324px;
  }
  .sample-text__input-group {
    box-sizing: border-box;
    padding: 8 0 16 0px;
    width: 100%;
    height: max-content;
    background-color: transparent;
    display: flex;
    gap: 8px;
    flex-direction: column;
    -webkit-box-pack: justify;
    justify-content: space-between;
    align-items: flex-start;
    border-bottom: 1px solid var(--figma-color-border);
  }
  .sample-style__input {
    grid-column-start: 1;
    padding: 8px;
    margin: 0 16px;
    border: 1px solid var(--figma-color-border);
    width: calc(100% - 96px);
    background-color: var(--color-bg);
    grid-column-end: span 28;
    color: var(--figma-color-text);
    fill: var(--figma-color-icon);
    border-radius: 2px;
    cursor: default;
    box-sizing: border-box;
    background-clip: padding-box;
    height: 72px;
    line-height: 180%;
    font-size: 11px;
    border-radius: 2px;
    width: -webkit-fill-available;
  }
  .sample-style__input:focus-visible {
    line-height: 180%;
    margin-top: 0;
    margin-bottom: 0;
    border: 1px solid var(--figma-color-border-selected, #0d99ff);
    outline: 1px solid var(--figma-color-border-selected, #0d99ff);
    outline-offset: -2px;
  }
  .sample-style__label {
    -webkit-user-select: none;
    user-select: none;
    text-align: left;
    color: var(--figma-color-text, #333333);
    fill: var(--figma-color-icon, #333333);
    border-radius: 2px;
    cursor: default;
    box-sizing: border-box;
    background-clip: padding-box;
  }
  .sample-style__content {
    display: flex;
    flex-direction: column;
  }
</style>

<body class="scrollbar-hidden">
  <div id="overlay" class="overlay hidden"></div>
  <!-- tab-list -->
  <div class="tab-list">
    <ul class="tab-list__items">
      <li class="tab-list__item">
        <span class="tab-list__text">Apply styles</span>
      </li>
      <li class="tab-list__item">
        <span class="tab-list__text">Create style</span>
      </li>
    </ul>
    <div class="tab-list-active-indicator"></div>
  </div>

  <!-- Apply style  -->
  <div class="apply-style">
    <!-- è¦ç´ é¸æŠ -->
    <div class="apply-style__message">
      <p class="apply-style__text">
        Select the element whose <br />
        text you want to change
      </p>
    </div>
    <!-- ç™»éŒ²ã—ãŸãƒ†ã‚­ã‚¹ãƒˆã‚¹ã‚¿ã‚¤ãƒ«ä¸€è¦§ -->
    <div class="apply-style__content">
      <div class="apply-style__styles">
        <h2 class="apply-style__title">Style list</h2>
        <button
          class="apply-style__options-button"
          tabindex="0"
          aria-label="ãã®ä»–ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³"
          data-tooltip-type="text"
          data-tooltip="ãã®ä»–ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³"
        >
          <span class="apply-style__options-svg-container">
            <svg
              class="apply-style__options-svg"
              width="12"
              height="12"
              viewBox="0 0 12 12"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                fill-rule="nonzero"
                stroke="none"
                d="M5 5V0h1v5h5v1H6v5H5V6H0V5h5z"
                fill-opacity="1"
              />
            </svg>
          </span>
        </button>
      </div>

      <ul class="apply-style__list">
        <div class="scroll_container--track--HEzfy" role="none">
          <div
            class="scroll_container--scrollBar--YLWIi"
            role="none"
            style="transform: translate3d(0px, 0px, 0px); height: 186.397px"
          ></div>
        </div>
      </ul>
    </div>
    <!-- åæ˜ ãƒœã‚¿ãƒ³ -->
    <button id="applyBtn" class="create-style__apply-button disabled">
      Apply
    </button>
  </div>

  <!-- ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ -->
  <div id="loadingIndicator" class="loading-indicator hidden">
    <svg class="progress-ring" viewBox="0 0 240 240">
      <circle
        class="progress-ring__circle"
        stroke="var(--figma-color-bg-component)"
        stroke-width="10"
        fill="transparent"
        r="52"
        cx="120"
        cy="120"
      />
    </svg>
    <span class="progress-text">Applying fonts...</span>
  </div>

  <div style="display: flex">
    <!-- Create style  -->
    <div class="create-style hidden">
      <!-- ã‚¹ã‚¿ã‚¤ãƒ«å ä½œæˆ -->
      <div class="create-style__input-group">
        <label class="create-style__label" for="styleNameInput"
          >Style name</label
        >
        <input
          type="text"
          id="styleNameInput"
          spellcheck="false"
          class="create-style__input"
          name="styleName"
          placeholder="New style"
          autocomplete="off"
          dir="auto"
          value
        />
      </div>

      <div class="create-style__tabs">
        <div class="create-style__tab-header">
          <h2 class="create-style__tab-title">Settings</h2>
        </div>
        <div class="create-style__content">
          <div class="create-style__styles" id="mainView">
            <h2 class="create-style__tab-title">English</h2>
          </div>
          <div class="create-style__dropdown" data-lang="English">
            <div class="create-style__dropdown-group font-family">
              <button
                class="create-style__dropdown-toggle font-family"
                data-label-type="font-family"
              >
                <span class="create-style__dropdown-label">SF Pro</span>
              </button>
              <div
                class="create-style__font-menu hidden font-family-list-container"
                role="menu"
              >
                <div class="font_picker--fontPickerSearchRow--PBwi7">
                  <span class="svg-container font_picker--searchIcon--ADEyj"
                    ><svg
                      class="svg"
                      xmlns="http://www.w3.org/2000/svg"
                      width="11"
                      height="11"
                      viewBox="0 0 11 11"
                    >
                      <path
                        fill-opacity="1"
                        fill-rule="evenodd"
                        stroke="none"
                        d="M6.453 7.16C5.776 7.687 4.924 8 4 8 1.79 8 0 6.21 0 4c0-2.21 1.79-4 4-4 2.21 0 4 1.79 4 4 0 .924-.314 1.776-.84 2.453l3.194 3.193-.708.707L6.453 7.16zM7 4c0 1.657-1.343 3-3 3-1.657 0-3-1.343-3-3 0-1.657 1.343-3 3-3 1.657 0 3 1.343 3 3z"
                      ></path></svg
                  ></span>
                  <div class="font_picker--fontPickerSearchBar--XigbT">
                    <input
                      placeholder="Search fonts"
                      spellcheck="false"
                      class="font-search font_picker--fontPickerSearchBarInput--qOPld lazy_input--lazyInput--Ltb6r"
                      type="text"
                      data-testid="font-picker-search-input"
                      dir="auto"
                      value=""
                    />
                  </div>
                </div>
                <div class="scroll_container"></div>
                <!-- Figmaã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚ŒãŸãƒ•ã‚©ãƒ³ãƒˆãƒ•ã‚¡ãƒŸãƒªãƒ¼ã®å†…å®¹ãŒå…¥ã‚‹ -->
              </div>
            </div>
            <div class="create-style__dropdown-group font-weight">
              <div
                class="create-style__dropdown-toggle font-weight"
                style="width: 100%"
                data-label-type="font-weight"
              >
                <span class="create-style__dropdown-label">Regular</span>
                <div class="create-style__dropdown-icon-container">
                  <span class="create-style__svg-container">
                    <svg
                      class="create-style__dropdown-icon"
                      xmlns="http://www.w3.org/2000/svg"
                      width="8"
                      height="7"
                      viewBox="0 0 8 7"
                    >
                      <path
                        fill-opacity="1"
                        fill-rule="evenodd"
                        d="m3.646 5.354-3-3 .708-.708L4 4.293l2.646-2.647.708.708-3 3L4 5.707l-.354-.353z"
                      ></path>
                    </svg>
                  </span>
                </div>
              </div>
              <div
                class="create-style__font-menu hidden font-weight-list-container"
                role="menu"
              >
                <!-- ãƒ•ã‚©ãƒ³ãƒˆãƒ•ã‚¡ãƒŸãƒªãƒ¼ã«å¯¾å¿œã™ã‚‹ãƒ•ã‚©ãƒ³ãƒˆãƒ•ã‚§ã‚¤ãƒˆã®å†…å®¹ãŒå…¥ã‚‹ -->
              </div>
            </div>
          </div>
        </div>
        <div class="create-style__content">
          <div class="create-style__styles" id="mainView">
            <h2 class="create-style__tab-title">Japanese</h2>
          </div>
          <div class="create-style__dropdown" data-lang="Japanese">
            <div class="create-style__dropdown-group font-family">
              <button
                class="create-style__dropdown-toggle font-family"
                data-label-type="font-family"
              >
                <span class="create-style__dropdown-label">Noto Sans JP</span>
              </button>
              <div
                class="create-style__font-menu hidden font-family-list-container"
                role="menu"
              >
                <div class="font_picker--fontPickerSearchRow--PBwi7">
                  <span class="svg-container font_picker--searchIcon--ADEyj"
                    ><svg
                      class="svg"
                      xmlns="http://www.w3.org/2000/svg"
                      width="11"
                      height="11"
                      viewBox="0 0 11 11"
                    >
                      <path
                        fill-opacity="1"
                        fill-rule="evenodd"
                        stroke="none"
                        d="M6.453 7.16C5.776 7.687 4.924 8 4 8 1.79 8 0 6.21 0 4c0-2.21 1.79-4 4-4 2.21 0 4 1.79 4 4 0 .924-.314 1.776-.84 2.453l3.194 3.193-.708.707L6.453 7.16zM7 4c0 1.657-1.343 3-3 3-1.657 0-3-1.343-3-3 0-1.657 1.343-3 3-3 1.657 0 3 1.343 3 3z"
                      ></path></svg
                  ></span>
                  <div class="font_picker--fontPickerSearchBar--XigbT">
                    <input
                      placeholder="Search fonts"
                      spellcheck="false"
                      class="font-search font_picker--fontPickerSearchBarInput--qOPld lazy_input--lazyInput--Ltb6r"
                      type="text"
                      data-testid="font-picker-search-input"
                      dir="auto"
                      value=""
                    />
                  </div>
                </div>
                <div class="scroll_container"></div>
                <!-- Figmaã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚ŒãŸãƒ•ã‚©ãƒ³ãƒˆãƒ•ã‚¡ãƒŸãƒªãƒ¼ã®å†…å®¹ãŒå…¥ã‚‹ -->
              </div>
            </div>
            <div class="create-style__dropdown-group font-weight">
              <div
                class="create-style__dropdown-toggle font-weight"
                style="width: 100%"
                data-label-type="font-weight"
              >
                <span class="create-style__dropdown-label">Regular</span>
                <div class="create-style__dropdown-icon-container">
                  <span class="create-style__svg-container">
                    <svg
                      class="create-style__dropdown-icon"
                      xmlns="http://www.w3.org/2000/svg"
                      width="8"
                      height="7"
                      viewBox="0 0 8 7"
                    >
                      <path
                        fill-opacity="1"
                        fill-rule="evenodd"
                        d="m3.646 5.354-3-3 .708-.708L4 4.293l2.646-2.647.708.708-3 3L4 5.707l-.354-.353z"
                      ></path>
                    </svg>
                  </span>
                </div>
              </div>
              <div
                class="create-style__font-menu hidden font-weight-list-container"
                role="menu"
              >
                <!-- ãƒ•ã‚©ãƒ³ãƒˆãƒ•ã‚¡ãƒŸãƒªãƒ¼ã«å¯¾å¿œã™ã‚‹ãƒ•ã‚©ãƒ³ãƒˆãƒ•ã‚§ã‚¤ãƒˆã®å†…å®¹ãŒå…¥ã‚‹ -->
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="create-style__form-action">
        <button tabindex="0" class="create-style__submit-button">
          Create style
        </button>
      </div>
    </div>
    <div class="sample-text-container">
      <!-- ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ -->
      <div class="sample-style__message">
        <p class="apply-style__text">Preview Sample Text</p>
      </div>
      <div class="sample-text__input-group">
        <div class="create-style__tab-header">
          <h2 class="create-style__tab-title">Sample Content</h2>
        </div>
        <textarea
          type="text"
          id="styleNameInput"
          spellcheck="false"
          class="sample-style__input"
          name="styleName"
          placeholder="New style"
          autocomplete="off"
          dir="auto"
          value=""
        ></textarea>
      </div>
      <div class="create-style__tabs">
        <div class="create-style__tab-header">
          <h2 class="create-style__tab-title">Text</h2>
        </div>
        <div class="sample-style__content">
          <div class="create-style__dropdown" data-lang="English">
            <div class="create-style__dropdown-group font-family">
              <button
                class="create-style__dropdown-toggle font-family"
                data-label-type="font-family"
              >
                <span class="create-style__dropdown-label">SF Pro</span>
              </button>
              <div
                class="create-style__font-menu hidden font-family-list-container"
                role="menu"
              >
                <div class="font_picker--fontPickerSearchRow--PBwi7">
                  <span class="svg-container font_picker--searchIcon--ADEyj"
                    ><svg
                      class="svg"
                      xmlns="http://www.w3.org/2000/svg"
                      width="11"
                      height="11"
                      viewBox="0 0 11 11"
                    >
                      <path
                        fill-opacity="1"
                        fill-rule="evenodd"
                        stroke="none"
                        d="M6.453 7.16C5.776 7.687 4.924 8 4 8 1.79 8 0 6.21 0 4c0-2.21 1.79-4 4-4 2.21 0 4 1.79 4 4 0 .924-.314 1.776-.84 2.453l3.194 3.193-.708.707L6.453 7.16zM7 4c0 1.657-1.343 3-3 3-1.657 0-3-1.343-3-3 0-1.657 1.343-3 3-3 1.657 0 3 1.343 3 3z"
                      ></path></svg
                  ></span>
                  <div class="font_picker--fontPickerSearchBar--XigbT">
                    <input
                      placeholder="Search fonts"
                      spellcheck="false"
                      class="font-search font_picker--fontPickerSearchBarInput--qOPld lazy_input--lazyInput--Ltb6r"
                      type="text"
                      data-testid="font-picker-search-input"
                      dir="auto"
                      value=""
                    />
                  </div>
                </div>
                <div class="scroll_container"></div>
                <!-- Figmaã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚ŒãŸãƒ•ã‚©ãƒ³ãƒˆãƒ•ã‚¡ãƒŸãƒªãƒ¼ã®å†…å®¹ãŒå…¥ã‚‹ -->
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>

<script>
  // è¦ç´ ã‚’å–å¾—ã—ã¾ã™ã€‚
  const overlay = document.getElementById("overlay");
  const tabs = document.querySelectorAll(".tab-list__item");
  const tabContentsApplyStyle = document.querySelectorAll(".apply-style");
  const tabContentsCreateStyle = document.querySelectorAll(".create-style");
  const indicator = document.querySelector(".tab-list-active-indicator");
  const loader = document.querySelectorAll(".loading-indicator");
  let applyStyleItems;
  let applyStyleEditButtons;
  let applyStyleDeleteButtons;

  // CreateStyleãƒœã‚¿ãƒ³æŠ¼ä¸‹æ™‚ã®å‡¦ç†
  const createStyleButton = document.querySelector(
    ".create-style__submit-button"
  );
  const applyStyleList = document.querySelector(".apply-style__list");

  // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼ã®è¡¨ç¤ºã¨å‹•ä½œã‚’åˆ¶å¾¡ã™ã‚‹JavaScriptã‚³ãƒ¼ãƒ‰

  document.addEventListener("DOMContentLoaded", (event) => {
    const scrollContainer = document.querySelector(".apply-style__list");
    const scrollBar = document.querySelector(
      ".scroll_container--scrollBar--YLWIi"
    );
    let isDragging = false;

    // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼ã®é«˜ã•ã‚’è¨ˆç®—ã™ã‚‹é–¢æ•°
    const setScrollBarHeight = () => {
      const visibleRatio =
        scrollContainer.clientHeight / scrollContainer.scrollHeight;
      const scrollBarHeight = Math.max(
        visibleRatio * scrollContainer.clientHeight,
        10
      ); // æœ€å°é«˜ã•ãŒ10pxã§ã‚ã‚‹ã“ã¨ã‚’ä¿è¨¼
      scrollBar.style.height = scrollBarHeight + "px";
      scrollBar.style.display = "block"; // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼ã‚’è¡¨ç¤º
    };

    // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼ã¨ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚³ãƒ³ãƒ†ãƒŠã®é–¢é€£ä»˜ã‘
    const updateScrollBarPosition = () => {
      const scrollFraction =
        scrollContainer.scrollTop /
        (scrollContainer.scrollHeight - scrollContainer.clientHeight);
      const topPosition =
        scrollFraction *
        (scrollContainer.clientHeight - scrollBar.offsetHeight);
      scrollBar.style.transform = `translate3d(0px, ${topPosition}px, 0px)`;
    };

    // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼: ãƒã‚¦ã‚¹ãƒ›ã‚¤ãƒ¼ãƒ«ã§ã®ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«æ“ä½œ
    scrollContainer.addEventListener("wheel", (e) => {
      e.preventDefault();
      const deltaY = e.deltaY * 0.5;
      scrollContent(deltaY);
    });

    // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚¤ãƒ™ãƒ³ãƒˆã«ã‚ˆã‚Šã€ã‚«ã‚¹ã‚¿ãƒ ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼ã‚’æ›´æ–°
    scrollContainer.addEventListener("scroll", () => {
      updateScrollBarPosition();
    });

    // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«é–¢æ•°
    const scrollContent = (deltaY) => {
      scrollContainer.scrollTop += deltaY;
    };

    // ãƒ‰ãƒ©ãƒƒã‚°ã‚¤ãƒ™ãƒ³ãƒˆç”¨ã®ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°
    const startDrag = (e) => {
      isDragging = true;
      scrollBar.classList.add("dragging");
      document.body.classList.add("scrollbar-dragging");
    };

    const endDrag = (e) => {
      isDragging = false;
      scrollBar.classList.remove("dragging");
      document.body.classList.remove("scrollbar-dragging");
    };

    const doDrag = (e) => {
      if (isDragging) {
        const deltaY =
          e.movementY *
          (scrollContainer.scrollHeight / scrollContainer.clientHeight);
        scrollContent(deltaY);
      }
    };

    // ãƒ‰ãƒ©ãƒƒã‚°ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
    scrollBar.addEventListener("mousedown", startDrag);
    document.addEventListener("mousemove", doDrag);
    document.addEventListener("mouseup", endDrag);

    // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼ã®é«˜ã•ã®åˆæœŸè¨­å®š
    setScrollBarHeight();
    updateScrollBarPosition();
  });

  // é¸æŠã•ã‚ŒãŸè¦ç´ ã¨styleã®çŠ¶æ…‹ã‚’è¡¨ç¤º
  let selectedName = null;
  let selectedEnv = null;
  let hasSelection = false;
  let isEnvSelected = false;

  // åˆ©ç”¨å¯èƒ½ãªå…¨ãƒ•ã‚©ãƒ³ãƒˆæƒ…å ±ã‚’æ ¼ç´ã™ã‚‹å¤‰æ•°
  let availableFonts = []; // Figma APIã‹ã‚‰å–å¾—ã™ã‚‹ãƒ‡ãƒ¼ã‚¿

  // åˆ©ç”¨å¯èƒ½ãªãƒ•ã‚©ãƒ³ãƒˆã‚’ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ãŸã‚ã«ãƒ¡ã‚¤ãƒ³ã‚¹ã‚¯ãƒªãƒ—ãƒˆã«è¦æ±‚ã™ã‚‹
  parent.postMessage({ pluginMessage: { type: "load-fonts-request" } }, "*");

  // ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆè¨­å®š
  tabs.forEach((tab, index) => {
    tab.addEventListener("click", () => {
      activateTab(tab);
      // ã‚¿ãƒ–ã®å†…å®¹ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹
      toggleTabContents(index);
      toggleTabContentAndResize(index);
    });
  });
  activateTab(tabs[0]);
  toggleTabContents(0);
  toggleTabContentAndResize(0);

  // ã‚¿ãƒ–ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®è¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆã‚’è¡Œã†é–¢æ•°
  function toggleTabContents(index) {
    // Apply Stylesã‚¿ãƒ–ãŒé¸æŠã•ã‚ŒãŸå ´åˆï¼ˆindex 0ï¼‰
    if (index === 0) {
      tabContentsApplyStyle.forEach((content) =>
        content.classList.remove("hidden")
      );
      tabContentsCreateStyle.forEach((content) =>
        content.classList.add("hidden")
      );
    }
    // Create Styleã‚¿ãƒ–ãŒé¸æŠã•ã‚ŒãŸå ´åˆï¼ˆindex 1ï¼‰
    else if (index === 1) {
      tabContentsApplyStyle.forEach((content) =>
        content.classList.add("hidden")
      );
      tabContentsCreateStyle.forEach((content) =>
        content.classList.remove("hidden")
      );
    }
  }
  // ã‚¿ãƒ–ãŒé¸æŠã•ã‚ŒãŸéš›ã®é–¢æ•°ã‚’å®šç¾©ã—ã¾ã™ã€‚
  function activateTab(tab) {
    // ã™ã¹ã¦ã®ã‚¿ãƒ–ã‹ã‚‰ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚¯ãƒ©ã‚¹ã‚’å–ã‚Šé™¤ãã¾ã™ã€‚
    tabs.forEach((t) => {
      t.classList.remove("tab-list__item--active");
    });

    // é¸æŠã•ã‚ŒãŸã‚¿ãƒ–ã«ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚¯ãƒ©ã‚¹ã‚’è¿½åŠ ã—ã¾ã™ã€‚
    tab.classList.add("tab-list__item--active");

    // ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ã‚’æ´»æ€§çŠ¶æ…‹ã«ã—ã¦ã€é¸æŠã•ã‚ŒãŸã‚¿ãƒ–ã®ä½ç½®ã«åˆã‚ã›ã¾ã™ã€‚
    indicator.style.display = "block";
    indicator.style.width = "67px";
    indicator.style.left = `${tab.offsetLeft}px`;
  }

  // UIå´ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆå†…ã§ã€ã‚¿ãƒ–ã®åˆ‡ã‚Šæ›¿ãˆã‚¤ãƒ™ãƒ³ãƒˆã‚’æ‰±ã†
  function toggleTabContentAndResize(index) {
    // æ–°ã—ã„é«˜ã•ã‚’è¨ˆç®—ã™ã‚‹å‡¦ç†...
    let newHeight;
    let newWidth;
    // Apply Stylesã‚¿ãƒ–ãŒé¸æŠã•ã‚ŒãŸå ´åˆï¼ˆindex 0ï¼‰
    if (index === 0) {
      newHeight = 463;
      newWidth = 324;
    }
    // Create Styleã‚¿ãƒ–ãŒé¸æŠã•ã‚ŒãŸå ´åˆï¼ˆindex 1ï¼‰
    else if (index === 1) {
      newHeight = 373;
      newWidth = 648;
    }

    // ãƒ¡ã‚¤ãƒ³ã‚¹ã‚¯ãƒªãƒ—ãƒˆã«æ–°ã—ã„é«˜ã•ã‚’é€šçŸ¥
    parent.postMessage(
      {
        pluginMessage: {
          type: "resize-ui",
          width: newWidth,
          height: newHeight,
        },
      },
      "*"
    );
  }

  // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¨­å®š
  const circumference = 2 * Math.PI * 52;

  // æœ€åˆã«å††ã‚’ãƒªãƒ³ã‚°ã¨ã—ã¦è¡¨ç¤ºã™ã‚‹ãŸã‚ã«ã€
  // stroke-dasharrayã¨stroke-dashoffsetã‚’å††å‘¨ã®é•·ã•ã«ã‚»ãƒƒãƒˆã—ã¾ã™
  const circle = document.querySelector(".progress-ring__circle");
  circle.style.strokeDasharray = `${circumference} ${circumference}`;
  circle.style.strokeDashoffset = circumference;

  function setProgress(percent) {
    // ãƒ‘ãƒ¼ã‚»ãƒ³ãƒˆã«å¿œã˜ãŸã‚ªãƒ•ã‚»ãƒƒãƒˆã‚’è¨ˆç®—ã—ã¾ã™
    const offset = circumference - (percent / 100) * circumference;
    // ã‚ªãƒ•ã‚»ãƒƒãƒˆã‚’è¨­å®šã™ã‚‹ã“ã¨ã§ãƒªãƒ³ã‚°ã‚’æç”»ã—ã¾ã™
    circle.style.strokeDashoffset = offset;
  }

  // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‹ã‚‰é€ä¿¡ã•ã‚ŒãŸã¨ãã«ã‚¤ãƒ™ãƒ³ãƒˆã‚’ç™ºç«ã•ã›ã‚‹
  window.onmessage = (event) => {
    const message = event.data.pluginMessage;

    // å…±é€šã®ã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆã‚’å–å¾—
    const textElement = document.querySelector(
      ".apply-style__message .apply-style__text"
    ); // textElementã‚’ã“ã“ã§å®šç¾©
    const loadingIndicator = document.getElementById("loadingIndicator");

    switch (message.type) {
      // é¸æŠã—ãŸè¦ç´ é–¢é€£ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
      case "selection-cleared":
        textElement.innerHTML =
          "Select the element whose <br> text you want to change";
        textElement.style.color = "var(--figma-color-text-disabled)";
        textElement.style.fontWeight = "400";
        hasSelection = false;
        updateButtonState();
        break;
      case "update-name":
        textElement.textContent = message.name;
        textElement.style.color = "var(--figma-color-text)";
        textElement.style.fontWeight = "600";
        hasSelection = true;
        updateButtonState();
        break;
      case "update-progress":
        loadingIndicator.classList.remove("hidden");
        // é€²æ—çŠ¶æ³ã®ãƒ‘ãƒ¼ã‚»ãƒ³ãƒ†ãƒ¼ã‚¸ã‚’å—ã‘å–ã‚‹
        const progressPercent = event.data.pluginMessage.progress;
        // é€²æ—ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ã‚’æ›´æ–°ã™ã‚‹
        setProgress(progressPercent);
        break;
      case "hide-loading":
        loadingIndicator.classList.add("hidden");
        break;
      case "load-fonts":
        // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‹ã‚‰ãƒ•ã‚©ãƒ³ãƒˆæƒ…å ±ã‚’å–å¾—ã™ã‚‹
        availableFonts = message.fonts;
        let fontFamilyListContainers;

        fontFamilyListContainers = document.querySelectorAll(
          ".font-family-list-container"
        );
        // listContaineré ˜åŸŸå¤–ã®ã‚¯ãƒªãƒƒã‚¯ã‚’æ¤œçŸ¥ã™ã‚‹ãŸã‚ã®é–¢æ•°

        function handleDocumentClick(event) {
          fontFamilyListContainers.forEach((listContainer) => {
            // ã‚¯ãƒªãƒƒã‚¯ãŒlistContainerã¾ãŸã¯toggleå†…ã®ã‚‚ã®ã§ãªã„å ´åˆã€hiddenã‚¯ãƒ©ã‚¹ã‚’è¿½åŠ 
            if (
              listContainer.contains(event.target) ||
              listContainer.previousElementSibling.contains(event.target)
            ) {
              // ã‚¯ãƒªãƒƒã‚¯ã—ãŸã®ãŒlistContainerå†…ã€ã‚‚ã—ãã¯listContainerã«éš£æ¥ã™ã‚‹è¦ç´ ï¼ˆtoggleãƒœã‚¿ãƒ³ï¼‰ã®å ´åˆã¯ä½•ã‚‚ã—ãªã„
            } else {
              listContainer.classList.add("hidden");
            }
          });
        }

        document.addEventListener("click", handleDocumentClick);

        const createStyleContents = document.querySelectorAll(
          ".create-style__content"
        );
        createStyleContents.forEach((content) => {
          const fontFamilyListContainer = content.querySelector(
            ".font-family-list-container"
          );
          const searchInputContainer = content.querySelector(".font-search");
          const scrollContainer = content.querySelector(".scroll_container");
          setupSearchFunctionality(searchInputContainer, scrollContainer);
          const fontWeightListContainer = content.querySelector(
            ".font-weight-list-container"
          );
          const fontWeightSelectBtn = content.querySelector(
            ".create-style__dropdown-group.font-weight"
          );
          const dropDownToggle = content.querySelector(
            ".create-style__dropdown-toggle.font-family"
          );
          let fontWeightLabel = content.querySelector(
            ".create-style__dropdown-toggle.font-weight .create-style__dropdown-label"
          );

          // æ—¢å­˜ã®ãƒªã‚¹ãƒˆå†…å®¹ã‚’ä¸€åº¦ã‚¯ãƒªã‚¢ã™ã‚‹
          scrollContainer.innerHTML = "";

          // é‡è¤‡ã›ãšã«ãƒ•ã‚©ãƒ³ãƒˆãƒ•ã‚¡ãƒŸãƒªãƒ¼åã‚’è¨˜éŒ²ã™ã‚‹ãŸã‚ã®Setã‚’ä½œæˆ
          const addedFontFamilies = new Set();
          // å„ã‚³ãƒ³ãƒ†ãƒŠã«åŒã˜ãƒ•ã‚©ãƒ³ãƒˆãƒªã‚¹ãƒˆã‚’è¿½åŠ ã™ã‚‹
          availableFonts.forEach((font) => {
            if (font.fontName.family.localeCompare("ABeeZee") < 0) {
              // ğŸ‘ˆ ã“ã“ã§ABeeZeeã‚ˆã‚Šã‚‚å‰ã«ã‚ã‚‹ã‹ã©ã†ã‹ã‚’æ¯”è¼ƒ
              return; // ABeeZeeã‚ˆã‚Šè¾æ›¸é †ã§å‰ã«æ¥ã‚‹å ´åˆã¯skipï¼ˆã“ã®ãƒ«ãƒ¼ãƒ—ã®ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã‚¹ã‚­ãƒƒãƒ—ã™ã‚‹ï¼‰
            }
            // ãƒ•ã‚©ãƒ³ãƒˆãƒ•ã‚¡ãƒŸãƒªãƒ¼åãŒSetã«ã¾ã è¿½åŠ ã•ã‚Œã¦ã„ãªã„å ´åˆã®ã¿é …ç›®ã‚’ä½œæˆã™ã‚‹
            if (!addedFontFamilies.has(font.fontName.family)) {
              addedFontFamilies.add(font.fontName.family);

              // æ–°ã—ã„ãƒ•ã‚©ãƒ³ãƒˆãƒ•ã‚¡ãƒŸãƒªãƒ¼ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼é …ç›®ã‚’ä½œæˆ
              const item = document.createElement("div");
              item.className = "font-menu__item font-item";
              item.setAttribute("role", "menuitem");

              // ãƒ•ã‚©ãƒ³ãƒˆãƒ•ã‚¡ãƒŸãƒªãƒ¼åã‚’è¡¨ç¤ºã™ã‚‹ãŸã‚ã®ãƒ†ã‚­ã‚¹ãƒˆéƒ¨åˆ†ã‚’ä½œæˆ
              const text = document.createElement("div");
              text.className = "font-menu__text";
              text.textContent = font.fontName.family;
              item.appendChild(text);

              // ãƒªã‚¹ãƒˆã«ãƒ¡ãƒ‹ãƒ¥ãƒ¼é …ç›®ã‚’è¿½åŠ 
              scrollContainer.appendChild(item);
            }
          });

          dropDownToggle.addEventListener("click", () => {
            fontFamilyListContainer.classList.add("hidden");
            // ãƒœã‚¿ãƒ³ã«é–¢é€£ã¥ã‘ã‚‰ã‚ŒãŸãƒªã‚¹ãƒˆã‚³ãƒ³ãƒ†ãƒŠã‚’å–å¾—ã™ã‚‹
            if (fontFamilyListContainer) {
              fontFamilyListContainer.classList.toggle("hidden"); // ã‚¯ãƒªãƒƒã‚¯ã”ã¨ã«ãƒªã‚¹ãƒˆã®è¡¨ç¤ºãƒ»éè¡¨ç¤ºã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹
              event.stopPropagation(); // ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ¬ãƒ™ãƒ«ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ãŒåå¿œã—ãªã„ã‚ˆã†ã«ã™ã‚‹
            }
          });
          fontWeightSelectBtn.addEventListener("click", () => {
            fontWeightListContainer.classList.add("hidden");
            overlay.classList.remove("hidden");
            document.body.classList.add("menu-open");

            // ãƒœã‚¿ãƒ³ã«é–¢é€£ã¥ã‘ã‚‰ã‚ŒãŸãƒªã‚¹ãƒˆã‚³ãƒ³ãƒ†ãƒŠã‚’å–å¾—ã™ã‚‹
            if (fontFamilyListContainer) {
              fontFamilyListContainer.classList.toggle("hidden"); // ã‚¯ãƒªãƒƒã‚¯ã”ã¨ã«ãƒªã‚¹ãƒˆã®è¡¨ç¤ºãƒ»éè¡¨ç¤ºã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹
              event.stopPropagation(); // ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ¬ãƒ™ãƒ«ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ãŒåå¿œã—ãªã„ã‚ˆã†ã«ã™ã‚‹
            }
          });

          scrollContainer.childNodes.forEach((item) => {
            item.addEventListener("click", (event) => {
              const fontName = item.textContent;
              // è¦ªã® '.create-style__dropdown' ã‚’å–å¾—ã—ã¦ã€é–¢é€£ã™ã‚‹ãƒ©ãƒ™ãƒ«ã‚’æ›´æ–°ã™ã‚‹
              const dropDown = fontFamilyListContainer.closest(
                ".create-style__dropdown"
              );
              const label = dropDown.querySelector(
                ".create-style__dropdown-label"
              );
              if (label) {
                label.textContent = fontName;
              }

              fontFamilyListContainer.classList.add("hidden"); // é …ç›®ã‚’é¸æŠã—ãŸå¾Œã€ãƒªã‚¹ãƒˆã‚’é–‰ã˜ã‚‹
              makeFontWeightLists(
                fontName,
                fontWeightListContainer,
                fontWeightLabel
              );

              // ãƒªã‚¹ãƒˆã‚¢ã‚¤ãƒ†ãƒ ã®ã‚¤ãƒ™ãƒ³ãƒˆãŒã€Œãƒœã‚¿ãƒ³ã€ã¾ã§ãƒãƒ–ãƒªãƒ³ã‚°ã—ã¦ãƒœã‚¿ãƒ³ã®ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆãŒç™ºç«ã™ã‚‹ã®ã‚’é˜²ã
              event.stopPropagation();
            });
          });
          fontWeightSelectBtn.addEventListener("click", function () {
            if (fontWeightListContainer.classList.contains("hidden")) {
              // ç¾åœ¨ã®ãƒ•ã‚©ãƒ³ãƒˆãƒ•ã‚¡ãƒŸãƒªãƒ¼ãƒ©ãƒ™ãƒ«ã‹ã‚‰ãƒ•ã‚©ãƒ³ãƒˆåã‚’å–å¾—
              const currentFontFamily = content.querySelector(
                ".create-style__dropdown-toggle.font-family .create-style__dropdown-label"
              ).textContent;
              // è¡¨ç¤ºã•ã‚Œã‚‹ã¹ããƒ•ã‚©ãƒ³ãƒˆã‚¦ã‚§ã‚¤ãƒˆä¸€è¦§ã‚’è¡¨ç¤ºã™ã‚‹
              makeFontWeightLists(
                currentFontFamily,
                fontWeightListContainer,
                fontWeightLabel
              );
              fontWeightListContainer.classList.remove("hidden");
            } else {
              fontWeightListContainer.classList.add("hidden"); // ãƒªã‚¹ãƒˆã‚’é–‰ã˜ã‚‹
            }
          });
        });
        break;
      case "add-style-to-list":
        applyStyleItems = document.querySelectorAll(".apply-style__item");

        // æ–°ã—ã„ãƒªã‚¹ãƒˆã‚¢ã‚¤ãƒ†ãƒ ã‚’ä½œæˆ
        const styleName = message.styleName;
        const env = message.env;

        let isEnvExists = false;
        applyStyleItems.forEach((item) => {
          if (item.getAttribute("data-env") === env) {
            isEnvExists = true;
          }
        });

        // æ—¢ã«å­˜åœ¨ã™ã‚‹å ´åˆã¯ã€æ–°ã—ã„ãƒªã‚¹ãƒˆã‚¢ã‚¤ãƒ†ãƒ ã®è¿½åŠ ã‚’ã‚¹ã‚­ãƒƒãƒ—ã™ã‚‹
        if (isEnvExists) {
          break;
        }

        const newItem = document.createElement("li");
        newItem.classList.add("apply-style__item");
        newItem.setAttribute("data-env", env);

        // ãƒªã‚¹ãƒˆã‚¢ã‚¤ãƒ†ãƒ ã«è¿½åŠ ã™ã‚‹HTMLã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’è¨­å®š
        newItem.innerHTML = `
          <div class="apply-style__item-content">
            <h3 class="apply-style__item-title">${styleName}</h3>
          </div>
          <button
            class="apply-style__options-button edit"
            tabindex="0"
            aria-label="ãã®ä»–ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³"
            data-tooltip-type="text"
            data-tooltip="ãã®ä»–ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³"
          >
            <span class="apply-style__options-svg-container">
              <svg
                class="apply-style__options-svg"
                width="32"
                height="32"
                viewBox="0 0 32 32"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M12 16.05V9H13V16.05C14.1411 16.2816 15 17.2905 15 18.5C15 19.7095 14.1411 20.7184 13 20.95V23H12V20.95C10.8589 20.7184 10 19.7095 10 18.5C10 17.2905 10.8589 16.2816 12 16.05ZM14 18.5C14 19.3284 13.3284 20 12.5 20C11.6716 20 11 19.3284 11 18.5C11 17.6716 11.6716 17 12.5 17C13.3284 17 14 17.6716 14 18.5ZM19 23H20V15.95C21.1411 15.7184 22 14.7095 22 13.5C22 12.2905 21.1411 11.2816 20 11.05V9H19V11.05C17.8589 11.2816 17 12.2905 17 13.5C17 14.7095 17.8589 15.7184 19 15.95V23ZM21 13.5C21 12.6716 20.3284 12 19.5 12C18.6716 12 18 12.6716 18 13.5C18 14.3284 18.6716 15 19.5 15C20.3284 15 21 14.3284 21 13.5Z"
                />
              </svg>
            </span>
          </button>
          <div class="apply-style__popup edit">
            <div class="apply-style__popup-arrow-container">
              <div class="apply-style__popup-content">Edit style</div>
              <div class="apply-style__popup-arrow">
                <svg
                  width="13"
                  height="7"
                  viewBox="0 0 13 7"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path d="M6.5 0L13 6.5H0L6.5 0Z" fill="#222222" />
                </svg>
              </div>
            </div>
          </div>
          <button
            class="apply-style__options-button delete"
            tabindex="0"
            aria-label="ãã®ä»–ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³"
            data-tooltip-type="text"
            data-tooltip="ãã®ä»–ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³"
          >
            <span class="apply-style__options-svg-container">
              <svg
                class="apply-style__options-svg"
                width="32"
                height="32"
                viewBox="0 0 32 32"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M15 9.5C14.4477 9.5 14 9.94772 14 10.5H18C18 9.94772 17.5523 9.5 17 9.5H15ZM19 10.5C19 9.39543 18.1046 8.5 17 8.5H15C13.8954 8.5 13 9.39543 13 10.5H11.5H10V11.5H11V21.5C11 22.6046 11.8954 23.5 13 23.5H19C20.1046 23.5 21 22.6046 21 21.5V11.5H22V10.5H20.5H19ZM20 11.5H18.5H13.5H12V21.5C12 22.0523 12.4477 22.5 13 22.5H19C19.5523 22.5 20 22.0523 20 21.5V11.5ZM14 18.5V14.5H15V18.5H14ZM17 18.5V14.5H18V18.5H17Z"
                />
              </svg>
            </span>
          </button>

          <div class="apply-style__popup delete">
            <div class="apply-style__popup-arrow-container">
              <div class="apply-style__popup-content">Delete style</div>
              <div class="apply-style__popup-arrow">
                <svg
                  width="13"
                  height="7"
                  viewBox="0 0 13 7"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path d="M6.5 0L13 6.5H0L6.5 0Z" fill="#222222" />
                </svg>
              </div>
            </div>
          </div>
          <!-- ãã®ä»–ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ã¨ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã€ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãªã©ã‚’å«ã‚€HTMLã‚’ã“ã“ã«è¿½åŠ  -->
        `;

        // apply-style__listã®è¦ç´ ã«æ–°ã—ã„ãƒªã‚¹ãƒˆã‚¢ã‚¤ãƒ†ãƒ ã‚’è¿½åŠ 
        applyStyleList.appendChild(newItem);

        // æ–°ã—ã„ãƒªã‚¹ãƒˆã‚¢ã‚¤ãƒ†ãƒ ã«é–¢ã™ã‚‹ã‚¤ãƒ™ãƒ³ãƒˆã‚’ã“ã“ã§è¿½åŠ ã—ã¦ã„ã¾ã™
        newItem.addEventListener("click", function (e) {
          // ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆã®ãƒãƒ–ãƒªãƒ³ã‚°ã‚’æ­¢ã‚ã‚‹
          e.stopPropagation();

          // ä»–ã®ã‚¢ã‚¤ãƒ†ãƒ ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–çŠ¶æ…‹ã‚’è§£é™¤
          removeAllActiveItems();
          removeAllActiveButtons();

          // ã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸã‚¢ã‚¤ãƒ†ãƒ ã«ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚¯ãƒ©ã‚¹ã‚’åˆ‡ã‚Šæ›¿ãˆ
          newItem.classList.toggle("active");
          selectedName = newItem.querySelector(
            ".apply-style__item-title"
          ).textContent; // ã‚¹ã‚¿ã‚¤ãƒ«åã‚’å–å¾—
          selectedEnv = newItem.getAttribute("data-env"); // ç’°å¢ƒã‚’å–å¾—

          // ãƒœã‚¿ãƒ³ã®çŠ¶æ…‹ã‚’æ›´æ–°
          updateButtonState();
        });

        // è¨­å®š/ç·¨é›†ãƒœã‚¿ãƒ³ã«é–¢ã™ã‚‹ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’ã“ã“ã§è¿½åŠ ã§ãã¾ã™ã€‚
        const applyStyleEditButton = newItem.querySelector(
          ".apply-style__options-button.edit"
        );
        const applyStyleDeleteButton = newItem.querySelector(
          ".apply-style__options-button.delete"
        );
        applyStyleEditButton.addEventListener("click", function (e) {
          // ã‚¤ãƒ™ãƒ³ãƒˆã®ãƒãƒ–ãƒªãƒ³ã‚°ã‚’é˜»æ­¢
          e.stopPropagation();

          removeAllActiveButtons();

          // ã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸè¦ç´ ãŒãƒœã‚¿ãƒ³è‡ªä½“ã§ã¯ãªãå­è¦ç´ ã®å ´åˆã€closestã‚’ä½¿ç”¨ã—ã¦ãƒœã‚¿ãƒ³è¦ç´ ã‚’å–å¾—
          const buttonElement = e.target.closest(
            ".apply-style__options-button"
          );

          // ãƒœã‚¿ãƒ³ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–çŠ¶æ…‹ã‚’ãƒˆã‚°ãƒ«ã™ã‚‹
          const isActive = buttonElement.classList.toggle("active");
          if (isActive) {
            overlay.classList.remove("hidden");
            document.body.classList.add("menu-open");
            // ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«ãªã£ãŸã¨ã
            // if (popup) {
            //   popup.style.display = "none";
            // }
            // if (menu) {
            //   menu.style.display = "block";
            // }
          } else {
            // ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã§ãªã„ã¨ãï¼ˆåˆ¥ã®å‡¦ç†ãŒå¿…è¦ãªå ´åˆã®ã¿ï¼‰
            overlay.classList.add("hidden");
            document.body.classList.remove("menu-open");
          }

          // ä»–ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªé …ç›®ã‚’éã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«ã™ã‚‹
          removeAllActiveItems();
        });
        applyStyleDeleteButton.addEventListener("click", function (e) {
          e.stopPropagation(); // ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ–ãƒªãƒ³ã‚°ã‚’é˜²ã
          const envValue = newItem.getAttribute("data-env");
          let itemToDelete = document.querySelector(
            `.apply-style__item[data-env="${envValue}"]`
          ); // DOM è¦ç´ ã‚’å–å¾—
          if (itemToDelete) {
            itemToDelete.remove(); // DOM è¦ç´ ã‚’å‰Šé™¤
          }
          parent.postMessage(
            {
              pluginMessage: {
                type: "delete-style",
                env: newItem.getAttribute("data-env"),
              },
            },
            "*"
          );
        });
        break;
    }
  };
  // æ¤œç´¢æ©Ÿèƒ½ã‚’è¨­å®šã™ã‚‹é–¢æ•°
  function setupSearchFunctionality(searchInputContainer, scrollContainer) {
    // æ¤œç´¢ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’è¿½åŠ 
    searchInputContainer.addEventListener("input", function () {
      let searchText = searchInputContainer.value.toLowerCase();

      if (searchInputContainer) {
        // æ¤œç´¢ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’è¿½åŠ 
        searchInputContainer.addEventListener("input", function () {
          let searchText = searchInputContainer.value.toLowerCase();

          // ã“ã®æ™‚ç‚¹ã§ã®font-itemsã‚’å†å–å¾—ã™ã‚‹
          let fontItems = scrollContainer.querySelectorAll(".font-item");

          fontItems.forEach(function (item) {
            let fontName = item
              .querySelector(".font-menu__text")
              .textContent.toLowerCase();
            if (fontName.includes(searchText)) {
              item.style.display = "";
            } else {
              item.style.display = "none";
            }
          });
        });
      }
    });
  }
  // ãƒ•ã‚©ãƒ³ãƒˆã‚¦ã‚§ã‚¤ãƒˆã‚’è¡¨ç¤ºã™ã‚‹é–¢æ•°
  function makeFontWeightLists(
    fontFamilyName,
    fontWeightListContainer,
    fontWeightLabel
  ) {
    fontWeightListContainer.innerHTML = ""; // ã‚³ãƒ³ãƒ†ãƒŠã‚’ã‚¯ãƒªã‚¢

    const fontWeights = availableFonts.filter(
      (font) => font.fontName.family === fontFamilyName
    );

    function createCheckIcon() {
      const namespace = "http://www.w3.org/2000/svg"; // SVGã®åå‰ç©ºé–“
      const checkIcon = document.createElementNS(namespace, "svg");
      checkIcon.setAttribute("class", "font-menu__icon hidden");
      checkIcon.setAttribute("viewBox", "0 0 16 16");
      checkIcon.setAttribute("fill", "none");

      const path = document.createElementNS(namespace, "path");
      path.setAttribute("fill-rule", "evenodd");
      path.setAttribute("clip-rule", "evenodd");
      path.setAttribute(
        "d",
        "M13.2067 5.20718L7.70669 10.7072L6.99959 11.4143L6.29248 10.7072L3.29248 7.70718L4.70669 6.29297L6.99959 8.58586L11.7925 3.79297L13.2067 5.20718Z"
      );
      path.setAttribute("fill", "white");

      checkIcon.appendChild(path);
      return checkIcon;
    }

    let allFontWeightItems = [];
    let defaultFontWeight;
    // 'Regular' ãŒã‚ã‚‹ã‹ã©ã†ã‹ç¢ºèªã—ã€è¨­å®šã™ã‚‹
    const regularFontWeight = fontWeights.find(
      (font) => font.fontName.style === "Regular"
    );

    fontWeights.forEach((font) => {
      // æ–°ã—ã„ãƒ•ã‚©ãƒ³ãƒˆã‚¦ã‚§ã‚¤ãƒˆã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼é …ç›®ã‚’ä½œæˆ
      const item = document.createElement("div");
      item.className = "font-menu__item";
      item.setAttribute("role", "menuitem");

      // ãƒ•ã‚©ãƒ³ãƒˆã‚¦ã‚§ã‚¤ãƒˆåã‚’è¡¨ç¤ºã™ã‚‹ãŸã‚ã®ãƒ†ã‚­ã‚¹ãƒˆéƒ¨åˆ†ã‚’ä½œæˆ
      const text = document.createElement("div");
      text.className = "font-menu__text";
      text.textContent = font.fontName.style;
      item.appendChild(text);

      // ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¤ã‚³ãƒ³ã‚’è¿½åŠ 
      const checkIcon = createCheckIcon();
      item.appendChild(checkIcon);

      // ãƒªã‚¹ãƒˆã«ãƒ¡ãƒ‹ãƒ¥ãƒ¼é …ç›®ã‚’è¿½åŠ 
      fontWeightListContainer.appendChild(item);

      // ä½œæˆã—ãŸãƒ¡ãƒ‹ãƒ¥ãƒ¼é …ç›®ã‚’é…åˆ—ã«è¿½åŠ 
      allFontWeightItems.push(item);

      // é …ç›®ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸæ™‚ã®å‡¦ç†ã‚’è¿½åŠ 
      item.addEventListener("click", () => {
        fontWeightLabel.textContent = font.fontName.style; // ãƒ©ãƒ™ãƒ«ã‚’æ›´æ–°
        fontWeightListContainer.classList.add("hidden"); // ãƒ•ã‚©ãƒ³ãƒˆã‚¦ã‚§ã‚¤ãƒˆãƒªã‚¹ãƒˆã‚’é–‰ã˜ã‚‹

        // ä»–ã®ã™ã¹ã¦ã®ã‚¢ã‚¤ãƒ†ãƒ ã®ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¤ã‚³ãƒ³ã«hiddenã‚¯ãƒ©ã‚¹ã‚’è¿½åŠ ã™ã‚‹
        allFontWeightItems.forEach((cItem) => {
          const icon = cItem.querySelector(".font-menu__icon");
          if (icon) icon.classList.add("hidden");
        });
        updateCheckState(item, allFontWeightItems, checkIcon);

        // ç¾åœ¨é¸æŠã•ã‚ŒãŸã‚¢ã‚¤ãƒ†ãƒ ã®ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¤ã‚³ãƒ³ã®hiddenã‚¯ãƒ©ã‚¹ã‚’å‰Šé™¤ã™ã‚‹
        checkIcon.classList.remove("hidden");
        event.stopPropagation();
      });

      // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ•ã‚©ãƒ³ãƒˆã‚¦ã‚§ã‚¤ãƒˆã‚’ç‰¹å®šã™ã‚‹
      if (!defaultFontWeight || font.fontName.style === "Regular") {
        defaultFontWeight = item;
      }
    });
    // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ•ã‚©ãƒ³ãƒˆã‚¦ã‚§ã‚¤ãƒˆã‚’ãƒ©ãƒ™ãƒ«ã¨ãƒã‚§ãƒƒã‚¯çŠ¶æ…‹ã«è¨­å®šã™ã‚‹
    if (defaultFontWeight) {
      fontWeightLabel.textContent = regularFontWeight
        ? "Regular"
        : fontWeights[0].fontName.style;
      updateCheckState(
        defaultFontWeight,
        allFontWeightItems,
        defaultFontWeight.querySelector(".font-menu__icon")
      );
    }
  }
  // ãƒã‚§ãƒƒã‚¯çŠ¶æ…‹ã®æ›´æ–°ã‚’è¡Œã†é–¢æ•°ã‚’è¿½åŠ 
  function updateCheckState(selectedItem, allItems, selectedCheckIcon) {
    allItems.forEach((cItem) => {
      const icon = cItem.querySelector(".font-menu__icon");
      if (icon) icon.classList.add("hidden");
    });
    selectedCheckIcon.classList.remove("hidden");
  }

  // ãƒœã‚¿ãƒ³ã«ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’è¿½åŠ 
  createStyleButton.addEventListener("click", function () {
    // ã‚¹ã‚¿ã‚¤ãƒ«åã®ã‚¤ãƒ³ãƒ—ãƒƒãƒˆè¦ç´ ã‹ã‚‰å€¤ã‚’å–å¾—
    const styleNameInput = document.getElementById("styleNameInput");
    const styleName = styleNameInput.value.trim();
    const timestamp = new Date().toISOString().replace(/[^\d]/g, "");
    // styleName ãŒç©ºã§ãªã„ã“ã¨ã‚’ç¢ºèªã—ã¾ã™
    if (!styleName) {
      alert("Please enter a style name.");
      return;
    }
    const newItem = document.createElement("li");
    newItem.classList.add("apply-style__item");
    newItem.setAttribute("data-env", `style-${timestamp}`);

    // ãƒªã‚¹ãƒˆã‚¢ã‚¤ãƒ†ãƒ ã«è¿½åŠ ã™ã‚‹HTMLã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’è¨­å®š
    newItem.innerHTML = `
      <div class="apply-style__item-content">
        <h3 class="apply-style__item-title">${styleName}</h3>
      </div>
      <button
        class="apply-style__options-button edit"
        tabindex="0"
        aria-label="ãã®ä»–ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³"
        data-tooltip-type="text"
        data-tooltip="ãã®ä»–ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³"
      >
        <span class="apply-style__options-svg-container">
          <svg
            class="apply-style__options-svg"
            width="32"
            height="32"
            viewBox="0 0 32 32"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M12 16.05V9H13V16.05C14.1411 16.2816 15 17.2905 15 18.5C15 19.7095 14.1411 20.7184 13 20.95V23H12V20.95C10.8589 20.7184 10 19.7095 10 18.5C10 17.2905 10.8589 16.2816 12 16.05ZM14 18.5C14 19.3284 13.3284 20 12.5 20C11.6716 20 11 19.3284 11 18.5C11 17.6716 11.6716 17 12.5 17C13.3284 17 14 17.6716 14 18.5ZM19 23H20V15.95C21.1411 15.7184 22 14.7095 22 13.5C22 12.2905 21.1411 11.2816 20 11.05V9H19V11.05C17.8589 11.2816 17 12.2905 17 13.5C17 14.7095 17.8589 15.7184 19 15.95V23ZM21 13.5C21 12.6716 20.3284 12 19.5 12C18.6716 12 18 12.6716 18 13.5C18 14.3284 18.6716 15 19.5 15C20.3284 15 21 14.3284 21 13.5Z"
            />
          </svg>
        </span>
      </button>
      <div class="apply-style__popup edit">
        <div class="apply-style__popup-arrow-container">
          <div class="apply-style__popup-content">Edit style</div>
          <div class="apply-style__popup-arrow">
            <svg
              width="13"
              height="7"
              viewBox="0 0 13 7"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path d="M6.5 0L13 6.5H0L6.5 0Z" fill="#222222" />
            </svg>
          </div>
        </div>
      </div>
      <button
        class="apply-style__options-button delete"
        tabindex="0"
        aria-label="ãã®ä»–ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³"
        data-tooltip-type="text"
        data-tooltip="ãã®ä»–ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³"
      >
        <span class="apply-style__options-svg-container">
          <svg
            class="apply-style__options-svg"
            width="32"
            height="32"
            viewBox="0 0 32 32"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M15 9.5C14.4477 9.5 14 9.94772 14 10.5H18C18 9.94772 17.5523 9.5 17 9.5H15ZM19 10.5C19 9.39543 18.1046 8.5 17 8.5H15C13.8954 8.5 13 9.39543 13 10.5H11.5H10V11.5H11V21.5C11 22.6046 11.8954 23.5 13 23.5H19C20.1046 23.5 21 22.6046 21 21.5V11.5H22V10.5H20.5H19ZM20 11.5H18.5H13.5H12V21.5C12 22.0523 12.4477 22.5 13 22.5H19C19.5523 22.5 20 22.0523 20 21.5V11.5ZM14 18.5V14.5H15V18.5H14ZM17 18.5V14.5H18V18.5H17Z"
            />
          </svg>
        </span>
      </button>

      <div class="apply-style__popup delete">
        <div class="apply-style__popup-arrow-container">
          <div class="apply-style__popup-content">Delete style</div>
          <div class="apply-style__popup-arrow">
            <svg
              width="13"
              height="7"
              viewBox="0 0 13 7"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path d="M6.5 0L13 6.5H0L6.5 0Z" fill="#222222" />
            </svg>
          </div>
        </div>
      </div>
      <!-- ãã®ä»–ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ã¨ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã€ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãªã©ã‚’å«ã‚€HTMLã‚’ã“ã“ã«è¿½åŠ  -->
    `;

    // apply-style__listã®è¦ç´ ã«æ–°ã—ã„ãƒªã‚¹ãƒˆã‚¢ã‚¤ãƒ†ãƒ ã‚’è¿½åŠ 
    applyStyleList.appendChild(newItem);

    // æ–°ã—ã„ãƒªã‚¹ãƒˆã‚¢ã‚¤ãƒ†ãƒ ã«é–¢ã™ã‚‹ã‚¤ãƒ™ãƒ³ãƒˆã‚’ã“ã“ã§è¿½åŠ ã—ã¦ã„ã¾ã™
    newItem.addEventListener("click", function (e) {
      // ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆã®ãƒãƒ–ãƒªãƒ³ã‚°ã‚’æ­¢ã‚ã‚‹
      e.stopPropagation();

      // ä»–ã®ã‚¢ã‚¤ãƒ†ãƒ ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–çŠ¶æ…‹ã‚’è§£é™¤
      removeAllActiveItems();
      removeAllActiveButtons();

      // ã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸã‚¢ã‚¤ãƒ†ãƒ ã«ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚¯ãƒ©ã‚¹ã‚’åˆ‡ã‚Šæ›¿ãˆ
      newItem.classList.toggle("active");
      selectedName = newItem.querySelector(
        ".apply-style__item-title"
      ).textContent; // ã‚¹ã‚¿ã‚¤ãƒ«åã‚’å–å¾—
      selectedEnv = newItem.getAttribute("data-env"); // ç’°å¢ƒã‚’å–å¾—

      // ãƒœã‚¿ãƒ³ã®çŠ¶æ…‹ã‚’æ›´æ–°
      updateButtonState();
    });

    // è¨­å®š/ç·¨é›†ãƒœã‚¿ãƒ³ã«é–¢ã™ã‚‹ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’ã“ã“ã§è¿½åŠ ã§ãã¾ã™ã€‚
    const applyStyleEditButton = newItem.querySelector(
      ".apply-style__options-button.edit"
    );
    const applyStyleDeleteButton = newItem.querySelector(
      ".apply-style__options-button.delete"
    );
    applyStyleEditButton.addEventListener("click", function (e) {
      // ã‚¤ãƒ™ãƒ³ãƒˆã®ãƒãƒ–ãƒªãƒ³ã‚°ã‚’é˜»æ­¢
      e.stopPropagation();

      removeAllActiveButtons();

      // ã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸè¦ç´ ãŒãƒœã‚¿ãƒ³è‡ªä½“ã§ã¯ãªãå­è¦ç´ ã®å ´åˆã€closestã‚’ä½¿ç”¨ã—ã¦ãƒœã‚¿ãƒ³è¦ç´ ã‚’å–å¾—
      const buttonElement = e.target.closest(".apply-style__options-button");

      // ãƒœã‚¿ãƒ³ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–çŠ¶æ…‹ã‚’ãƒˆã‚°ãƒ«ã™ã‚‹
      const isActive = buttonElement.classList.toggle("active");
      if (isActive) {
        overlay.classList.remove("hidden");
        document.body.classList.add("menu-open");
        // ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«ãªã£ãŸã¨ã
        // if (popup) {
        //   popup.style.display = "none";
        // }
        // if (menu) {
        //   menu.style.display = "block";
        // }
      } else {
        // ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã§ãªã„ã¨ãï¼ˆåˆ¥ã®å‡¦ç†ãŒå¿…è¦ãªå ´åˆã®ã¿ï¼‰
        overlay.classList.add("hidden");
        document.body.classList.remove("menu-open");
      }

      // ä»–ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªé …ç›®ã‚’éã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«ã™ã‚‹
      removeAllActiveItems();
    });
    applyStyleDeleteButton.addEventListener("click", function (e) {
      e.stopPropagation(); // ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ–ãƒªãƒ³ã‚°ã‚’é˜²ã
      const envValue = newItem.getAttribute("data-env");
      let itemToDelete = document.querySelector(
        `.apply-style__item[data-env="${envValue}"]`
      ); // DOM è¦ç´ ã‚’å–å¾—
      if (itemToDelete) {
        itemToDelete.remove(); // DOM è¦ç´ ã‚’å‰Šé™¤
      }
      parent.postMessage(
        {
          pluginMessage: {
            type: "delete-style",
            env: newItem.getAttribute("data-env"),
          },
        },
        "*"
      );
    });

    // ãƒ•ã‚©ãƒ³ãƒˆã‚¹ã‚¿ã‚¤ãƒ«æƒ…å ±ã‚’ãã‚Œãã‚Œã®ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ã‹ã‚‰å–å¾—
    const japaneseFontFamily = document
      .querySelector('[data-lang="Japanese"] [data-label-type="font-family"]')
      .textContent.trim();
    const japaneseFontWeight = document
      .querySelector('[data-lang="Japanese"] [data-label-type="font-weight"]')
      .textContent.trim();
    const englishFontFamily = document
      .querySelector('[data-lang="English"] [data-label-type="font-family"]')
      .textContent.trim();
    const englishFontWeight = document
      .querySelector('[data-lang="English"] [data-label-type="font-weight"]')
      .textContent.trim();

    // å„è¨€èªã®ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã‚’æ ¼ç´ã™ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—ã¾ã™
    const fontSettings = {
      Japanese: {
        fontFamily: japaneseFontFamily,
        fontWeight: japaneseFontWeight,
      },
      English: {
        fontFamily: englishFontFamily,
        fontWeight: englishFontWeight,
      },
    };
    // ã‚¹ã‚¿ã‚¤ãƒ«åã¨ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã‚’Figmaãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ãƒ¡ã‚¤ãƒ³ã‚³ãƒ¼ãƒ‰ã«é€ä¿¡
    parent.postMessage(
      {
        pluginMessage: {
          type: "save-style",
          styleName: styleName,
          fontSettings: fontSettings,
          key: timestamp, // ã“ã®éƒ¨åˆ†ã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®IDã‚„ä¸€æ„ã®è­˜åˆ¥å­ã‚’ä½¿ç”¨
        },
      },
      "*"
    );
    styleNameInput.value = "";
  });

  // Applyãƒœã‚¿ãƒ³ã®è¦ç´ ã‚’å–å¾—ã—ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ç„¡åŠ¹åŒ–ã™ã‚‹
  const applyBtn = document.getElementById("applyBtn");
  applyBtn.disabled = true; // åˆæœŸçŠ¶æ…‹ã¨ã—ã¦ãƒœã‚¿ãƒ³ã‚’ç„¡åŠ¹åŒ–
  // UIã®HTMLä¸­ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚
  // UIã‹ã‚‰é€ã‚‰ã‚Œã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ã€ä¸Šè¨˜ figma.ui.onmessage ã§ãƒªãƒƒã‚¹ãƒ³ã•ã‚Œã¾ã™ã€‚
  // When the button is clicked, the plugin will start the text analysis and update
  applyBtn.addEventListener("click", () => {
    parent.postMessage(
      {
        pluginMessage: {
          type: "analyzeAndUpdateText",
          Name: selectedName,
          key: selectedEnv,
        },
      },
      "*"
    );
  });

  // ã™ã¹ã¦ã®ãƒœã‚¿ãƒ³ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–çŠ¶æ…‹ã‚’è§£é™¤ã™ã‚‹é–¢æ•°
  function removeAllActiveButtons() {
    document
      .querySelectorAll(".apply-style__options-button.active")
      .forEach((activeButton) => {
        activeButton.classList.remove("active");
      });
  }

  // ã™ã¹ã¦ã®ã‚¢ã‚¤ãƒ†ãƒ ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–çŠ¶æ…‹ã‚’è§£é™¤ã™ã‚‹é–¢æ•°
  function removeAllActiveItems() {
    document
      .querySelectorAll(".apply-style__item.active")
      .forEach((activeItem) => {
        activeItem.classList.remove("active");
      });
  }

  // ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå…¨ä½“ã®ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’è¿½åŠ 
  document.addEventListener(
    "click",
    (e) => {
      // ã‚¯ãƒªãƒƒã‚¯ãŒ.apply-style__item or .apply-style__options-buttonè¦ç´ ã®å†…éƒ¨ã§ãªã‘ã‚Œã°ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚¯ãƒ©ã‚¹ã‚’å‰Šé™¤
      if (
        !e.target.closest(".apply-style__item") ||
        !e.target.closest(".apply-style__options-button")
      ) {
        // ä»–ã®ã‚¢ã‚¤ãƒ†ãƒ ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–çŠ¶æ…‹ã‚’è§£é™¤
        // removeShowMenu();
        removeAllActiveItems();
        removeAllActiveButtons();
        selectedEnv = null;
        // ãƒœã‚¿ãƒ³ã®çŠ¶æ…‹ã‚’æ›´æ–°
        updateButtonState();
      }
    },
    false
  );

  // ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’éè¡¨ç¤ºã«ã™ã‚‹ãŸã‚ã®é–¢æ•°
  function hideMenu() {
    // Apply styles ã® menu ã‚’éè¡¨ç¤ºã«ã™ã‚‹
    document.querySelectorAll(".menu").forEach((menu) => {
      menu.style.display = "none";
    });
    // Create styles ã® font-style / font-weight menu ã‚’éè¡¨ç¤ºã«ã™ã‚‹
    document.querySelectorAll(".create-style__font-menu").forEach((menu) => {
      menu.classList.add("hidden");
    });

    // ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ã‚’éè¡¨ç¤ºã«ã™ã‚‹
    overlay.classList.add("hidden");

    // ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãŒé–‹ã„ã¦ã„ã‚‹çŠ¶æ…‹ã‚¯ãƒ©ã‚¹ã‚’bodyã‹ã‚‰å‰Šé™¤
    document.body.classList.remove("menu-open");

    // ã™ã¹ã¦ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒœã‚¿ãƒ³ã®çŠ¶æ…‹ã‚’ãƒªã‚»ãƒƒãƒˆ
    const activeButtons = document.querySelectorAll(
      ".apply-style__options-button.active"
    );
    activeButtons.forEach((button) => {
      button.classList.remove("active");
    });
  }

  // ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸæ™‚ã«ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’éè¡¨ç¤ºã«ã™ã‚‹ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’è¿½åŠ 
  overlay.addEventListener("click", hideMenu);

  // ã‚¢ã‚¤ãƒ†ãƒ ã®ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆã‚’è¨­å®š
  applyStyleItems.forEach((item) => {
    item.addEventListener("click", (e) => {
      // ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆã®ãƒãƒ–ãƒªãƒ³ã‚°ã‚’æ­¢ã‚ã‚‹
      e.stopPropagation();

      // ä»–ã®ã‚¢ã‚¤ãƒ†ãƒ ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–çŠ¶æ…‹ã‚’è§£é™¤
      removeAllActiveItems();
      removeAllActiveButtons();

      // ã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸã‚¢ã‚¤ãƒ†ãƒ ã«ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚¯ãƒ©ã‚¹ã‚’åˆ‡ã‚Šæ›¿ãˆ
      item.classList.toggle("active");
      selectedEnv = item.getAttribute("data-env"); // ç’°å¢ƒã‚’å–å¾—

      // ãƒœã‚¿ãƒ³ã®çŠ¶æ…‹ã‚’æ›´æ–°
      updateButtonState();
    });
  });

  // Applyãƒœã‚¿ãƒ³ã®æœ‰åŠ¹/ç„¡åŠ¹ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’æ›´æ–°ã™ã‚‹é–¢æ•°
  function updateButtonState() {
    // selectedEnvãŒnullã§ãªã„ã‹ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ã€isEnvSelectedã‚’æ›´æ–°ã™ã‚‹
    isEnvSelected = selectedEnv !== null;
    // Applyãƒœã‚¿ãƒ³ã¯ç’°å¢ƒãŒé¸æŠã•ã‚Œã€ä½•ã‹ãŒé¸æŠã•ã‚Œã¦ã„ã‚‹å ´åˆã®ã¿æ´»æ€§åŒ–ã™ã‚‹
    applyBtn.disabled = !(isEnvSelected && hasSelection);

    if (isEnvSelected && hasSelection) {
      applyBtn.classList.remove("disabled");
      applyBtn.classList.add("active");
    } else {
      applyBtn.classList.remove("active");
      applyBtn.classList.add("disabled");
    }
  }
</script>
